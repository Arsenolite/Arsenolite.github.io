---
title: 灵异事件二则
date: 2019-05-21 17:04:02
categories: ["2019-05"]
tags:["Java"]
---
……调微信支付的时候碰到两个灵异事件

首先是按[Spring文档](https://docs.spring.io/spring-boot/docs/2.1.4.RELEASE/reference/html/configuration-metadata.html#configuration-metadata-annotation-processor) 添加了如下依赖：
```groovy
dependencies {
	annotationProcessor "org.springframework.boot:spring-boot-configuration-processor"
}
```
然后写了一个微信支付AppID的配置类

结果代码里跑起来死活为null

想了一下，把wxpay相关的配置拿到了spring相关配置下方（按理应该没影响）

然后配置文件里log后面莫名其妙多了一个`192.168.3.49`，没注意到，启动测试类读取微信支付配置时提示连不上数据库`192.168.3.49`……

删掉之后 配置文件里的数据库密码突然变成了之前调试本地数据库时候的本地数据库密码。。

改掉配置文件，invalid cache and restart之后测试类能读到配置类的数据了。。然后配置类的`@Data`注解上还多了个断点，感觉电脑被远程控制了一样……

最骚的是，IDEA 2019.1.1不支持Gradle4.9+SpringBoot读配置文件的组合，如果依赖写的是`annotationProcessor`会提示class path里没有spring配置相关的processor。。

----

2019-5-21 17:12:36
更骚的出现了，测试类能拿到appID，引用了common模块的其他模块跑起来的时候拿不到

最后是因为多个application.yml冲突了……
