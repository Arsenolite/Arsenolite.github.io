---
title: 简单的聚合支付网关设计
date: 2019-09-24 09:39:35
categories: ["2019-09"]
tags: ["Java"]
---

由于不是很熟悉旧业务，在写完微商城项目后 本打算重构公司原有的“支付模块”，结果要顾及原有项目和它的对接，一时间竟无从下手。



恰逢手上活不多，着手设计一个聚合支付网关，由于之前对接了微信支付，因此这个网关也能看到一些微信支付的影子，例如使用随机字符串+HMAC256验证签名，而不是用支付宝的RSA方案。

由于公司内部有两个项目（一起绣、微商城），其中微商城项目针对不同客户有不同的部署方式，因此商户号、appid等支付参数需要按公司独立。

一开始苦于微商城的CompanyId机制和一起绣的参数无法兼容，参看了微信支付的设计后果断采用了按项目/公司签发应用的方式，毕竟支付宝/微信实际上也是一种包装了众多银行网关的聚合支付，照抄没什么问题



