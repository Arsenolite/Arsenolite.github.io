---
title: 白菜的开发日记1
tags: ["白菜","Java","MySQL","WinServer"]
categories: ["2017-08"]
date: 2017-08-24 13:47:34
---
emm。从16号早上出门前Initial Commit，到23号中午12点白菜正式上线，这一周的时间过的真是快啊……

https://github.com/Arsenolite/osubot/commits/master

43次commit之后，终于有时间坐下来写点开发日记了。严格的说这是第一个我写出来能用的程序啊（x

先介绍一下她吧，她是一个面向osu群的QQ机器人，具体用法可以参见github的readme（普通用户就两条指令你还写个readme真是凑不要脸x）

相对别的机器人的亮点就是她返回的是图片，样式主要由啊哇设计，我们从旁修改，当然最后是我实现的。（记得18号那天我画一行丢一个图在群里x

作为Java程序员，老本行就是折腾数据库，当然白菜也有这方面的功能。每天凌晨4点将所有登记了的玩家的数据爬取，然后存入，提供一个对比功能。

18号晚上写完用户名片绘制，19号上午写完凌晨的定时任务，20号做了一些sudo命令。

22号凌晨1点终于搞定BP绘制，然后白天研究maven打包，开通vps，关闭mysql占用空闲内存缓存等等。

22号晚上怕他突然提出来一个大BUG，之前数据库中我存入的是用户名，但是这样会导致无法识别改名玩家的问题。

于是晚上赶工重构代码+改表结构，由于发现操作系统的时区就是北京时间，而BP返回时间是根据API key对应玩家的国籍来的（也是北京时间），砍掉了所有的时区转换。

在vps上运行的时候查API失败率非常低，于是将api工具类中加上重试机制，砍掉了其他地方代码对网络错误的try-catch。

然后就是些小bug（之前改的时候没改彻底导致的各种问题），昨天中午正式上线，下午晚上研究了jsoup爬取网页指定元素，又把爬score rank改成了二分法。

顺手写了个自动欢迎新人，由于啊哇还没想好scorerank的呈现方式，把绘制scorerank的代码注释掉发布到了服务器上。

……挺后悔没有边开发边写博文的，现在有的遇到的bug都已经忘记了……

总之这个项目增强了我对SQL、前端（jsoup提供的是js的getElementById方法，和css的div.Class风格的选择器）的熟练度，顺便还达成了第一次使用WinServer系统的成就，勉强算是linux+WinServer都能干的运维？

复习了以前练手搞的多线程机制，IO流，各种包装类，日期处理，字符串处理之类的基础问题，初次尝试手写二分法（特别新鲜），可以说它弥补了我Java基础代码写得少的缺陷……

毕竟之前在单位搞的SSM框架更多是做填空题，把XML配好，crud和参数验证写好，甚至那个小项目都用不着组装复杂pojo……到处都是提供好的最佳实践（

……虽然这个项目用的也都是给好的类和方法，充其量起到了熟悉JDK本身的作用，毕竟不是和c一样要手写String的查找替换啥的（x

emm，白菜大概是不会弃坑的，以后尽量写出详细的遇到/解决bug的过程吧233




